<template>
  <article class="container_full layout_category">
    <div class="grid-layout_sub-category">
      <CategoryHeader>
        {{ meta.title }}
        <template v-slot:right_column>
          <!--          <img src="@/assets/img/icons/MD_logo.svg" alt="">-->
        </template>
      </CategoryHeader>
      <div class="grid__column_12 grid_cols_2_tablet" style="grid-gap: 3vw;">
        <div v-if="adType.isCustomer" class="сustomers">
          <svg
            width="31"
            height="150"
            viewBox="0 0 31 150"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="сustomers__lines"
          >
            <line
              opacity="0.1"
              x1="30.5"
              y1="150"
              x2="30.5"
              y2="-4.37114e-08"
              stroke="white"
            />
            <line
              opacity="0.35"
              x1="15.5"
              y1="140"
              x2="15.5"
              y2="10"
              stroke="white"
            />
            <line
              opacity="0.8"
              x1="0.5"
              y1="130"
              x2="0.499995"
              y2="20"
              stroke="white"
            />
          </svg>
          <svg
            width="70"
            height="100"
            viewBox="0 0 70 100"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style="margin-left: 15px;"
          >
            <path
              d="M62.3912 55.6555L53.2371 52.1245L48.5596 47.447C48.249 47.1364 47.8319 46.9939 47.4231 47.022V43.032C49.6338 40.697 51.2039 37.726 51.8195 34.3736C51.8277 34.3435 51.8768 34.2941 51.9106 34.2805C52.3193 34.3086 52.733 34.2807 53.141 34.1973C55.2709 33.7613 56.817 31.7815 56.817 29.4897V28.2696C56.817 26.9014 56.2449 25.6491 55.3201 24.7754C56.826 16.7392 55.634 10.1988 51.8586 5.83882C48.2301 1.64939 42.3725 -0.352159 34.9196 0.0507682C27.9236 0.428891 23.455 3.68727 22.1279 4.7943C20.2635 5.02691 14.7463 6.36499 14.7463 14.0386C14.7463 18.3802 15.4643 21.9749 15.951 23.9139C14.2998 24.6383 13.1807 26.3346 13.1807 28.2881V29.4899C13.1807 31.7815 14.7268 33.7613 16.8566 34.1975C17.2647 34.281 17.6787 34.309 18.0871 34.2807C18.1207 34.2943 18.1699 34.3435 18.1777 34.3723C18.7936 37.7252 20.3639 40.6966 22.5746 43.0318V47.022C22.1656 46.9939 21.7484 47.1366 21.4381 47.447L16.7608 52.1243L7.6067 55.6553C3.26825 57.3288 0.478227 61.5748 0.664554 66.2211L1.96103 98.5932C1.99267 99.3817 2.64169 99.9994 3.42372 99.9994C3.44364 99.9994 3.46356 99.999 3.48348 99.9983C4.29188 99.9658 4.92078 99.2844 4.88855 98.476L3.59208 66.1039C3.55399 65.1545 3.68641 64.2281 3.9659 63.3592L9.29302 68.6863C10.7907 70.184 11.6155 72.1752 11.6155 74.2931V98.5348C11.6155 99.3438 12.2713 99.9996 13.0803 99.9996C13.8893 99.9996 14.5451 99.3438 14.5451 98.5348V74.2927C14.5451 71.3924 13.4157 68.6654 11.3647 66.6145L5.44011 60.6901C6.28269 59.6854 7.37936 58.8833 8.66138 58.3887L17.2746 55.0665L23.8336 64.9051C24.6004 66.0555 25.8293 66.7932 27.205 66.9293C27.3582 66.9445 27.5109 66.952 27.6628 66.952C28.5898 66.952 29.4867 66.6723 30.246 66.1535L28.839 98.4707C28.8038 99.2789 29.4304 99.9627 30.2388 99.9979C30.2605 99.9988 30.2822 99.9992 30.3036 99.9992C31.0833 99.9992 31.7318 99.3848 31.7659 98.5981L33.0661 68.7354H36.9329L38.2331 98.5981C38.2673 99.3846 38.9157 99.9992 39.6954 99.9992C39.7169 99.9992 39.7386 99.9988 39.7602 99.9979C40.5684 99.9625 41.1952 99.2789 41.16 98.4707L39.753 66.1539C40.5122 66.6729 41.409 66.9523 42.3362 66.9523C42.4881 66.9523 42.6411 66.9447 42.794 66.9297C44.1696 66.7936 45.3985 66.0557 46.1655 64.9055L52.7244 55.0669L61.3376 58.3891C62.6197 58.8836 63.7163 59.686 64.5589 60.6905L58.6343 66.6149C56.5834 68.6658 55.4539 71.3928 55.4539 74.2931V98.5348C55.4539 99.3438 56.1097 99.9996 56.9187 99.9996C57.7277 99.9996 58.3836 99.3438 58.3836 98.5348V74.2931C58.3836 72.1752 59.2084 70.184 60.706 68.6863L66.0331 63.3592C66.3126 64.2281 66.445 65.1545 66.407 66.1039L65.1107 98.476C65.0782 99.2844 65.7073 99.9658 66.5157 99.9983C66.5359 99.999 66.5556 99.9994 66.5755 99.9994C67.3573 99.9994 68.0066 99.3817 68.0382 98.5932L69.3347 66.2213C69.5196 61.575 66.7296 57.329 62.3912 55.6555ZM21.0582 33.8426C20.7826 32.3389 19.392 31.2477 17.8904 31.3574C17.7443 31.3682 17.5941 31.3578 17.4438 31.3272C16.6832 31.1715 16.1098 30.3817 16.1098 29.4899V28.2881C16.1098 27.3991 16.6916 26.6264 17.4633 26.4909C18.0992 26.3793 18.7102 26.6135 19.0967 27.1174C19.3771 27.4832 19.7506 27.7446 20.1767 27.8735C20.801 28.0619 21.4894 27.9514 22.0183 27.578C23.2996 26.6737 24.3857 25.5264 25.2463 24.1682C25.6793 23.4848 25.4765 22.5799 24.7931 22.1467C24.1097 21.7137 23.2047 21.9167 22.7717 22.5999C22.248 23.426 21.6172 24.1479 20.891 24.753C20.3285 24.2331 19.6494 23.8688 18.918 23.6811C18.4941 22.1018 17.6754 18.4762 17.6754 14.0388C17.6754 7.92709 22.2258 7.68295 22.734 7.67534C23.1125 7.67534 23.4761 7.52885 23.749 7.26655C23.7896 7.22768 27.8871 3.36481 35.077 2.97614C41.5924 2.62419 46.6295 4.27711 49.643 7.75698C52.7111 11.2997 53.7117 16.745 52.5617 23.5522C52.0344 23.5163 51.432 23.5559 50.8381 23.6682L49.2014 19.738C48.9205 19.0636 48.1842 18.6997 47.4782 18.8841C47.3217 18.9249 31.7392 22.8778 25.1732 14.7038C24.6668 14.0731 23.7449 13.9724 23.1138 14.479C22.4832 14.9856 22.3824 15.9077 22.8892 16.5384C29.523 24.7975 42.8137 22.8557 46.9709 22.0028L48.2528 25.0805C48.7358 26.2409 49.9713 26.8746 51.1906 26.5875C51.7293 26.4608 52.2834 26.445 52.5316 26.4942C53.3041 26.6479 53.8865 27.411 53.8865 28.2694V29.4895C53.8865 30.3813 53.3131 31.1711 52.5525 31.3268C52.4021 31.3576 52.2522 31.3676 52.1061 31.357C50.6082 31.2469 49.2139 32.3385 48.9377 33.8426C47.7022 40.5695 41.8397 45.4521 34.998 45.4521C28.1564 45.4521 22.2939 40.5695 21.0582 33.8426ZM28.8355 63.534C28.4812 63.8885 27.9923 64.0637 27.4929 64.0141C26.9941 63.9647 26.5486 63.6971 26.2705 63.2801L19.6615 53.3665L22.5402 50.4878L32.8556 59.5137L28.8355 63.534ZM33.1929 65.8059L33.306 63.2067L34.9987 61.5139L36.6913 63.2067L36.8044 65.8059H33.1929ZM34.9987 57.4962L25.5041 49.1884V45.5021C28.2378 47.328 31.5118 48.3823 34.9987 48.3823C38.4856 48.3823 41.7596 47.328 44.4934 45.5023V49.1884L34.9987 57.4962ZM43.7268 63.2801C43.4487 63.6971 43.0032 63.9647 42.5044 64.0141C42.0049 64.0639 41.5163 63.8883 41.1618 63.534L37.1417 59.5137L47.4571 50.4878L50.3358 53.3665L43.7268 63.2801Z"
              fill="white"
              stroke="white"
              stroke-width="0.4"
            />
          </svg>
          <div class="сustomers__buttons">
            <span>Заказчики</span>
            <Button to="заказчики" shape="rounded" borders="outline">
              Открыть список
            </Button>
          </div>
        </div>
        <div class="performers">
          <svg
            width="77"
            height="95"
            viewBox="0 0 77 95"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M66.6358 63.2537C69.9426 65.6547 71.505 72.7407 71.83 75.2739L74.296 93.8751L76.8726 93.537L74.4087 74.9141C74.3567 74.5024 73.0522 64.6926 68.1744 61.1734C66.5405 60.0813 64.7896 59.1733 62.952 58.469C62.8415 58.3845 62.7223 58.3174 62.5901 58.2718L61.5174 57.8926C59.8965 57.2664 58.2041 56.6813 56.5789 56.1742L55.5756 55.8232C55.4759 55.7863 55.3741 55.7647 55.2679 55.7538C52.5505 54.8936 50.1647 54.2586 48.8862 53.9249V51.0819C52.7672 48.3081 55.0729 43.8312 55.0686 39.0617V36.8731C55.5019 37.0313 55.9592 37.1136 56.4164 37.1201C58.5855 37.1201 60.3429 35.3627 60.3429 33.1936V29.6917C60.3429 28.7404 59.9919 27.8238 59.3613 27.1174C59.7795 26.45 59.9919 25.6742 59.9746 24.8897V23.3945C60.0352 22.3046 59.6907 21.2297 59.0103 20.3738C58.657 20.0054 58.2041 19.741 57.7057 19.6175C57.398 16.0702 55.7143 5.65577 46.7322 1.58621H46.6542C44.3139 0.582904 41.8024 0.0454964 39.2605 0.00432408H38.5129C36.0816 -0.0455161 33.6611 0.33587 31.3598 1.12898H31.2991C21.3527 4.78682 19.5607 15.9012 19.279 19.5829C18.7784 19.7064 18.3233 19.9686 17.9723 20.3391C17.2594 21.1842 16.8866 22.2612 16.9321 23.362V24.9006C16.9126 25.685 17.125 26.4586 17.5411 27.1217C16.9148 27.8347 16.5616 28.7513 16.5616 29.7026V33.2109C16.5616 35.38 18.3212 37.1353 20.4881 37.1353C20.9497 37.1353 21.4026 37.0508 21.8338 36.8882V39.0855C21.8425 43.8009 24.0983 48.228 27.9078 51.006V53.9249C23.3139 55.1232 18.7871 56.5773 14.3556 58.287H14.2971C12.3338 59.0216 10.4616 59.9816 8.71284 61.1387C3.83501 64.6926 2.53266 74.4916 2.47849 74.8816L0.0146484 93.5154L2.59117 93.8491L5.05501 75.2153C5.38439 72.6887 6.94243 65.6114 10.208 63.1909C11.246 62.4996 12.3468 61.9102 13.4975 61.4291V72.5912C11.5992 73.2889 9.20475 75.2413 9.20475 79.3629V93.7126C9.20475 94.4212 9.77899 94.9997 10.4919 94.9997H66.4559C67.1689 94.9997 67.741 94.4212 67.741 93.7126V79.3868C67.741 75.2652 65.3313 73.3149 63.4482 72.6193V61.4573C64.5685 61.9514 65.6325 62.5538 66.6358 63.2537ZM57.7903 29.6917V33.2044C57.7339 33.9455 57.0817 34.5002 56.3406 34.4417C55.6818 34.3876 55.1574 33.8632 55.1032 33.2044V29.6917C55.0469 28.9485 55.5973 28.3006 56.3406 28.2377C57.0817 28.1792 57.7339 28.7339 57.7903 29.475C57.7989 29.5466 57.7989 29.6202 57.7903 29.6917ZM40.2725 2.64152C41.8392 2.7607 43.3843 3.10092 44.86 3.64266V10.1631C43.7982 11.6908 42.1231 12.6724 40.2725 12.8501V2.64152ZM33.1107 3.28511C34.6016 2.85822 36.1423 2.62202 37.6982 2.58085V12.8848C35.8476 12.7071 34.1682 11.7233 33.1107 10.1956V3.28511ZM21.8013 33.1936C21.7428 33.9347 21.0905 34.4916 20.3516 34.4309C19.6929 34.3811 19.1684 33.8567 19.1143 33.1936V29.6917C19.0536 28.9485 19.6083 28.3006 20.3516 28.2377C21.0905 28.1792 21.7428 28.7339 21.8013 29.475C21.8078 29.5466 21.8078 29.6202 21.8013 29.6917V33.1936ZM20.4535 25.7587C20.2086 25.7587 19.9702 25.7825 19.734 25.8259C19.5347 25.5593 19.4393 25.2235 19.474 24.8897V23.3295C19.4588 22.92 19.5607 22.5169 19.7752 22.168C19.825 22.1269 19.89 22.1117 19.9572 22.1204H20.4535C21.1642 22.1204 21.7428 21.5418 21.7428 20.8289C21.7428 20.2286 21.9118 8.80437 30.5277 4.32092V10.5076C30.5277 10.6983 30.571 10.8847 30.6534 11.0558C30.7422 11.2357 32.842 15.522 38.9745 15.522C45.1048 15.522 47.2133 11.2292 47.2978 11.0558C47.3758 10.8847 47.4213 10.6983 47.4148 10.5076V4.94067C54.9667 9.76 55.1466 20.2524 55.1466 20.8289C55.1466 21.5418 55.7251 22.1204 56.4337 22.1204H56.9321C57.06 22.1204 57.0882 22.1204 57.112 22.168C57.3309 22.5256 57.4327 22.9373 57.4132 23.3577V24.8897C57.4479 25.2278 57.3482 25.5658 57.138 25.8259C55.8747 25.5767 54.568 25.9754 53.6622 26.8942H23.2423C22.5034 26.1596 21.5001 25.7565 20.4621 25.7674L20.4535 25.7587ZM24.3778 39.0855V29.4707H52.544V39.0855C52.5332 45.8378 47.0573 51.3029 40.3072 51.2964H36.5973C29.8538 51.2942 24.3865 45.8313 24.3778 39.0855ZM46.3422 52.5771V54.4818L38.4436 64.5821L30.4562 54.4818V52.5229C32.3826 53.4178 34.4781 53.8794 36.5973 53.8816H40.3072C42.3896 53.8816 44.4483 53.4352 46.3422 52.5771ZM23.0126 57.9966C25.4678 57.2469 27.5828 56.6748 28.6793 56.3888L38.4609 68.7556L48.1321 56.3888C49.2438 56.6813 51.3934 57.2469 53.9027 58.0291V72.7818H22.9845L23.0126 57.9966ZM65.1688 79.3868V92.4471H11.7791V79.3868C11.7791 75.4992 14.6568 74.9401 14.9645 74.886C15.6038 74.7971 16.074 74.251 16.074 73.6096V60.3825C17.489 59.8321 18.9929 59.3098 20.4535 58.8374V74.0712C20.4535 74.7841 21.0299 75.3627 21.7428 75.3627H55.2311C55.9418 75.3627 56.5204 74.7841 56.5204 74.0712V58.8634L60.8565 60.3825V73.6096C60.8565 74.2532 61.3354 74.8036 61.9725 74.886C62.1047 74.9033 65.1688 75.3627 65.1688 79.3868Z"
              fill="white"
            />
            <path
              d="M14.7607 77.7637H21.7145V80.0737H14.7607V77.7637Z"
              fill="white"
            />
            <path
              d="M55.1899 77.7637H62.1481V80.0737H55.1899V77.7637Z"
              fill="white"
            />
          </svg>
          <div class="performers__buttons">
            <span>Исполнители</span>
            <Button to="частники" shape="rounded" borders="outline">
              Частники
            </Button>
            <Button to="фирмы-и-магазины" shape="rounded" borders="outline"
              >Фирмы</Button
            >
          </div>
          <svg
            width="31"
            height="150"
            viewBox="0 0 31 150"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="performers__lines"
          >
            <line
              opacity="0.1"
              x1="0.5"
              y1="8.74228e-08"
              x2="0.499974"
              y2="150"
              stroke="white"
            />
            <line
              opacity="0.35"
              x1="15.5"
              y1="10"
              x2="15.5"
              y2="140"
              stroke="white"
            />
            <line
              opacity="0.8"
              x1="30.5"
              y1="20"
              x2="30.5"
              y2="130"
              stroke="white"
            />
          </svg>
        </div>
      </div>
      <SellingButtons v-if="adType.isSell" :author-types="SellingAuthors" />
    </div>
  </article>
</template>

<script>
import CategoryHeader from '@/components/Category/Header/CategoryHeader'
import SellingButtons from '@/components/Ad/Category/SellingButtons'
// import { getCategoryIDByUrl, getCategoryMeta } from '@/assets/js/mixins'

export default {
  layout: 'Category',
  components: {
    CategoryHeader,
    SellingButtons,
  },
  // mixins: [getCategoryIDByUrl, getCategoryMeta],
  props: {
    meta: {
      type: Object,
      default: null,
    },
    category: {
      type: Object,
      default: null,
    },
  },
  data() {
    return {
      a: 'a',
    }
  },
  computed: {
    adType() {
      const adType = {}
      const categoryMeta = this.category.meta
      adType.isService = !!categoryMeta.find((result) => result.type_id === 1)
      adType.isSell = !!categoryMeta.find((result) => result.type_id === 2)
      adType.isCustomer = !!categoryMeta.find((result) => result.type_id === 3)
      return adType
    },
    authorType() {
      const authorType = {}
      const categoryMeta = this.category.meta
      authorType.isPrivate = !!categoryMeta.find(
        (result) => result['private-person'] === 1
      )
      authorType.isFirm = !!categoryMeta.find((result) => result.firm === 1)
      authorType.isOnlineShop = !!categoryMeta.find(
        (result) => result['online-shop'] === 1
      )
      authorType.isShoppingCenter = !!categoryMeta.find(
        (result) => result['shopping-center'] === 1
      )
      authorType.isPlant = !!categoryMeta.find((result) => result.plant === 1)
      return authorType
    },
    SellingAuthors() {
      const obj = {}
      const categoryMeta = this.category.meta
      obj.private_person = !!categoryMeta.find(
        (result) => result['private-person'] === 1 && result.type_id === 2
      )
      obj.firm = !!categoryMeta.find(
        (result) => result.firm === 1 && result.type_id === 2
      )
      obj.online_shop = !!categoryMeta.find(
        (result) => result['online-shop'] === 1 && result.type_id === 2
      )
      obj.shopping_center = !!categoryMeta.find(
        (result) => result['shopping-center'] === 1 && result.type_id === 2
      )
      obj.plant = !!categoryMeta.find(
        (result) => result.plant === 1 && result.type_id === 2
      )
      return obj
    },
  },
  methods: {
    getVisibility(adType = null, authorType = null) {
      return true
    },
  },
}
</script>

<style lang="scss">
@import '~assets/scss/app/index.scss';
.grid-layout_sub-category {
  max-height: 100%;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-template-rows: 1fr 1fr auto;
  grid-row-gap: 10px;
  grid-column-gap: 20px;
  @include media_screen(desktop-fhd) {
    grid-template-rows: 2fr 2fr auto;
  }
}
.сustomers {
  align-self: center;
  padding: 5% 10%;
  display: flex;
  align-items: center;
  @include on_tablet() {
    justify-content: flex-end;
    background: rgba(14, 36, 62, 0.3);
    box-shadow: 0px 10px 10px rgba(0, 0, 0, 0.1);
    border-top-right-radius: 120px;
    border-bottom-right-radius: 120px;
  }
  @include on_desktop() {
    grid-column: 1 span;
  }
  &__lines {
    @include on_mobile() {
      display: none;
    }
  }
  &__buttons {
    display: grid;
    grid-template-rows: 1fr 1fr;
    padding: 2%;
    height: 80%;
    margin-left: 15px;
    & > span {
      font-size: 1.1rem;
      text-align: left;
    }
  }
}
.performers {
  align-self: center;
  padding: 5% 10%;
  display: flex;
  align-items: center;
  @include on_tablet() {
    background: rgba(14, 36, 62, 0.3);
    box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
    border-top-left-radius: 120px;
    border-bottom-left-radius: 120px;
  }
  @include on_desktop() {
    grid-column: 1 span;
    grid-column-start: 2;
  }
  &__lines {
    @include on_mobile() {
      display: none;
    }
  }
  &__buttons {
    display: grid;
    grid-template-columns: auto auto;
    grid-template-rows: 1fr 1fr;
    padding: 2%;
    height: 80%;
    margin-left: 15px;
    margin-right: 15px;
    & > span {
      font-size: 1.1rem;
      text-align: left;
      grid-column: 1/-1;
    }
  }
}
</style>
